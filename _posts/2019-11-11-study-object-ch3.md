---
layout: post
title: Chapter.03 역할, 책임, 협력
subtitle: 코드로 이해하는 객체지향설계 오브젝트
gh-repo: hwayoungjun/hwayoungjun.github.io
gh-badge: [star, fork, follow]
tags: [study, object, oop]
comments: true
---

## 2장 되돌아보기
**객체지향 프로그래밍의 기본**
- DDD(Domain-Driven Design)
- 인터페이스와 상속을 통한 지연(동적) 바인딩       
- 추상클래스를 통한 코드 재사용 (합성)

~~이것으로 OOP 마스터...?~~
<br>
<br>
<br>
No! 객체지향 설계의 핵심은 **책임, 역할, 협력**.

다시 말해 객체지향 프로그래밍이란
객체를 적절한 단위로 분리하고, 책임들을 부여하여 역할을 구성하고, 실제 메시지 전송을 통해 협력시키는 것이다.

그럼 이제 3가지 핵심요소들에 대해 좀 더 자세히 알아보자.
<br>
<br>
## 책임
책임이란? 객체가 아는 것(knowing)과 하는 것(doing)이다.

이런, 너무나 추상적이다. 해당 객체가 가지고 있는 정보 또는 비즈니스 로직이라고 생각하자.
<br>
<br>
과거의 개발자들은 이러한 정보들을 머릿속에 다 넣은 상태로 설계까지 끝마쳐서 구현에 들어갔을까? 그럴리가..

객체지향 설계를 널리 알리고 접근성을 높이기 위해 고안된 기법으로 CRC 가 있다. 

모든 설계자나 개발자들이 이 기법을 활용하진 않았겠지만 구글신을 보면 종종 화이트보드나 포스트잇으로 CRC 를 표현하며 설계하고자 한 사진들을 찾아 볼 수 있다.

> **CRC** : **C**andidate **R**esponsibility **C**ollaborator

다음은 2장에서 설계한 영화 예매 프로그램의 Movie 클래스를 CRC 로 표현한 것이다.

![CRC](https://hwayoungjun.github.io/img/CRC.png)

이 CRC 를 통해 Movie 클래스는 가지고 있는 상영정보와 예매정보 생성이 책임이 된다는 것을 알 수 있다.
<br>
<br>
그렇다면 이렇게 책임을 할당하는 가장 기본적인 방법은 무엇일까?

바로 책임을 수행하는데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것이다.

이러한 패턴을 **정보 전문가(Information Expert) 패턴**이라 한다.

상단의 CRC 카드를 토대로 영화를 예매하는 프로그램을 작성한다고 가정할 경우, Screening 는 상영정보를 가지고 있지만 영화에 대한 정보 자체를 가지고 있는 것은 아니다. 

그러므로 우리는 영화정보 즉, 가격을 가지고 있는 Movie 에게 영화표 가격을 계산하는 책임을 할당해야 한다. (상영관마다 고정된 가격을 가지고 있는 것은 아니기 때문이다.)

이렇게 영화표를 계산하는 책임을 할당하면 다음과 같은 모습이 될 것이다. 가격을 계산하라는 메시지 전송을 하는 행위를 구현한다면 Movie 라는 클래스의 가격계산 메소드를 호출하는 것과 같다.

![책임](https://hwayoungjun.github.io/img/책임.PNG)

실제 구현이 이렇게 간단히 이루어지지는 않겠지만 앞서 본 예제에서 이미 눈치챘을수도 있을 것이다. 각 객체들의 책임을 나누고 부여하는 것은 프로그램의 전반적인 흐름을 결정한다는 것을 말이다. 

마지막으로 저자는 책임을 부여할 때 고려해야하는 2가지 요소를 소개한다. ~~저자의 의도가 파악이 잘 되지 않아서 주석을 달겠습니다.~~

#### 1.메시지가 객체를 결정한다.
(Screening 이라는 객체가 어떤 행동을 필요로 하는지 먼저 정하고 그 행동을 바탕으로 적절한 객체에게 책임을 부여하라.. 정도로 이해했습니다.)

#### 2. 행동이 상태를 결정한다. (객체의 상태가 아닌 행동에 초점을 맞춰라)
(이 말은 이해가 안가네요.. 저자가 실제 코드를 예로 들 경우 어떤 케이스를 말하는 걸까요?)
<br>
<br>
## 역할
역할은 책임보다 조금 더 작은 단위로써 하나의 행동(behavior)에 한정된 책임들의 집합이라 볼 수 있다.

책임을 설명하며 예로 들었던 영화 예매 프로그램의 가격을 계산하는 책임을 생각해보면

Movie 가 가지고 있는 가격 정보와 가격을 계산하는 메소드가 역할이 되는 것이다. 
<br>
<br>
이렇게 영화 예매 프로세스에서 가격을 계산하는 메소드를 분리하였을 경우 우리는 유연한 설계에 한발짝 더 다가설 수 있다.

<br>
<br>
## 협력
자 이제 객체에게 책임을 부여하고 그 책임들이 모여 각 객체들만의 독립적인 역할이 생겼다. 

그럼 마지막 핵심인 객체 간의 협력을 할 수 있는 방법은 뭘까?

**메시지 전송**이 바로 객체 간 협력을 위해 사용할 수 있는 유일한 수단이다.

이 또한 너무 추상적이다.. 좀 더 개발자스럽게 표현해보자면 바로 **메소드 호출**!
<br>
<br>


## 요약
지금까지 객체지향 패러다임 관점에서의 핵심인 **책임, 역할, 협력**에 대해 알아보았다.

책임은 객체가 가지고 있는 **필드와 메소드**이며 이 책임들이 모여 해당 객체의 역할을 이룬다.

이렇게 책임과 역할이 부여된 객체들간의 적절한 **메소드 호출**을 통해 협력이 이루어지며

이들이 모여 하나의 객체지향 프로그램이 되는 것이다.
<br>
<br>
객체지향 설계의 핵심을 공부하였으니 이제 실전에 적용해볼 차례이다.

2장에서 구현한 영화 예매 프로그램을 토대로 하단 요구사항들을 차근차근 구현해보자.
<br>
<br>
- 요구사항.

  + 우리 영화관도 이제 IMAX 를 도입했습니다. 장비 들이는데 돈을 많이 썼으니 기존 20% 가 아닌 딱 10% 만 할인해드리겠습니다.
  
  + 당연한 이야기지만 영화 관람이 끝난 후 3D 안경을 반납해주셔야 합니다.

